# Json-server
> https://github.com/typicode/json-server/tree/v0

Установить: npm i -g json-server
Запустить можно: npm start

Откроется простой сервер с корневыми эндпоинтами "project" и "projectList" - это примеры простых эндпоинтов для запросов. Для каждого объекта, json-server создаёт бэкенд для: получения, добавления, изменения и удаления данных, в зависимости от метода fetch - запроса.

Поддерживаются HTTP-запросы GET, POST, PUT, PATCH и DELETE.

> Подробнее: https://my-js.org/docs/cheatsheet/json-server/


## В проекте используются сложные запросы с кастомными эндпоинтами
Установить: 
> npm i

Запустить: 
> npm run serve

Откроется server.js в котором настроены:
1. global.router - эндпоинты (динамичеки сформированный json)
2. middlewares - промежуточное ПО.
3. Пользовательские обработчики - заменяют по ссылке запрос... 1 кастомный запрос на 1 эндпоинт. Например: добавляем
кастомный ендпоинт для метода PATCH. Остальные методы GET, POST, PUT, DELETE - остаются стандартными для этого объекта.
4. server.listen(PORT, () => {}); - функция запускает сервер и выводит в консоль информацию о: 
 - ссылке, по которой обращаться к серверу для получения данных; 
 - действующих эндпоинтах; 
 - роутах (ссылки перенаправляющие запросы).



#### Корневая БД, которая формируется динамически

    const db = require('./db.js');
    global.router = jsonServer.router(db());



Каждый эндпоинт импортируется из папки modules/
В каждом файле формируется json объект

Возможно делать кастомные запросы, по примеру из файла project.js функция projectActionPatch, которая импортируется в server.js для пользовательского обработчика, потому в json-server нельзя менять вложенные данные в объекте. 

Функция projectActionPatch меняет 1 значение (isFavorite) в project.parameters, что нельзя сделать 
стандартными средствами. Стандартно json-server заменит весь project.parameters, когда нам нужен только isFavorite.

> server.patch('/project', projectActionPatch);



## Общие рекомендации
1. Создать файл в папке modules/ с названием точки запроса
2. Внутри этого файла создать функцию, возвращающую объект, который будет отдаваться по запросу на ссылку.
3. В файле db.js сделать свойство объекта, имя потом будет ссылкой на точку запроса.
4. Если запрос нужно перенаправить. Например ссылку project/1 сделать ссылкой project/: нужно внести это в файл routes.json
> "/project/:projectId" : "/project"
5. При необходимости создать кастомные запросы в server.js, и функцию которая будет запускаться (в своём файле).
